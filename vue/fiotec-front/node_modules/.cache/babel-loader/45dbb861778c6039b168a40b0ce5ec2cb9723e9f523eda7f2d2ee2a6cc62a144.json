{"ast":null,"code":"import api from '@/api/api';\nimport { useSnackBar } from '@/stores/snackBar.js';\nexport default {\n  name: 'AddStudent',\n  props: {\n    schoolCourseId: {\n      type: Number,\n      default: null\n    },\n    load: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: () => ({\n    loading: false,\n    dialogAddStudent: false,\n    students: []\n  }),\n  computed: {\n    snackBar() {\n      return useSnackBar();\n    }\n  },\n  async created() {\n    await this.listStudents();\n  },\n  methods: {\n    close() {\n      this.dialogAddStudent = false;\n    },\n    async listStudents() {\n      this.loading = true;\n      try {\n        this.students = await api.listStudents();\n        this.loading = false;\n      } catch (e) {\n        const feedback = e?.response?.data?.message ?? 'Ocorreu um erro, tente novamente mais tarde';\n        this.snackBar.increment({\n          show: true,\n          msg: feedback,\n          color: 'warning'\n        });\n        this.loading = false;\n      }\n    },\n    async addStudent(studentId) {\n      this.loading = true;\n      const data = {\n        school_course_id: this.schoolCourseId,\n        student_id: studentId\n      };\n      try {\n        await api.enrollment(data);\n        this.snackBar.increment({\n          show: true,\n          msg: 'Aluno incluido com sucesso',\n          color: 'success'\n        });\n        this.$emit('reload');\n        this.loading = false;\n      } catch (e) {\n        const feedback = e?.response?.data?.message ?? 'Ocorreu um erro, tente novamente mais tarde';\n        this.snackBar.increment({\n          show: true,\n          msg: feedback,\n          color: 'warning'\n        });\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["api","useSnackBar","name","props","schoolCourseId","type","Number","default","load","Boolean","data","loading","dialogAddStudent","students","computed","snackBar","created","listStudents","methods","close","e","feedback","response","message","increment","show","msg","color","addStudent","studentId","school_course_id","student_id","enrollment","$emit"],"sources":["/app/src/components/schoolCourses/AddStudent.vue"],"sourcesContent":["<template>\n  <v-dialog\n    v-model=\"dialogAddStudent\"\n    max-width=\"400\"\n  >\n    <template v-slot:activator=\"{ props: activatorProps }\">\n        <v-btn\n          v-bind=\"activatorProps\"\n          density=\"compact\"\n          icon=\"mdi-account-plus\"\n          variant=\"text\"\n          size=\"small\"\n          :disabled=\"load\"\n        />\n    </template>\n    <v-card\n      prepend-icon=\"mdi-account-school\"\n      title=\"Adicionar Alunos\"\n    >\n      <template v-slot:text>\n        <v-list lines=\"students\" class=\"flex-grow-1\">\n          <v-list-item\n            v-for=\"student in students\"\n            :key=\"student.id\"\n            :title=\"student.name\"\n          >\n            <template v-slot:append>\n              <v-btn\n                color=\"grey-lighten-1\"\n                icon=\"mdi-plus\"\n                variant=\"text\"\n                @click=\"addStudent(student.id)\"\n              />\n            </template>\n          </v-list-item>\n        </v-list>\n      </template>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nimport api from '@/api/api';\nimport { useSnackBar } from '@/stores/snackBar.js'\n\nexport default {\n  name: 'AddStudent',\n\n  props: {\n    schoolCourseId: {\n      type: Number,\n      default: null\n    },\n    load: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: () => ({\n    loading: false,\n    dialogAddStudent: false,\n    students: []\n  }),\n  computed: {\n    snackBar() {\n      return useSnackBar()\n    }\n  },\n\n  async created () {\n    await this.listStudents()\n  },\n\n  methods: {\n    close () {\n      this.dialogAddStudent = false\n    },\n\n    async listStudents () {\n      this.loading = true\n      try {\n        this.students = await api.listStudents()\n        this.loading = false\n      } catch (e) {\n        const feedback = e?.response?.data?.message ?? 'Ocorreu um erro, tente novamente mais tarde'\n        this.snackBar.increment({show: true, msg: feedback, color: 'warning'} )\n        this.loading = false\n      }\n    },\n\n    async addStudent (studentId) {\n      this.loading = true\n      const data = {\n        school_course_id: this.schoolCourseId,\n        student_id: studentId\n      }\n      try {\n        await api.enrollment(data)\n        this.snackBar.increment({show: true, msg: 'Aluno incluido com sucesso', color: 'success'} )\n        this.$emit('reload')\n        this.loading = false\n      } catch (e) {\n        const feedback = e?.response?.data?.message ?? 'Ocorreu um erro, tente novamente mais tarde'\n        this.snackBar.increment({show: true, msg: feedback, color: 'warning'} )\n        this.loading = false\n      }\n    }\n  }\n}\n</script>"],"mappings":"AAyCA,OAAOA,GAAE,MAAO,WAAW;AAC3B,SAASC,WAAU,QAAS,sBAAqB;AAEjD,eAAe;EACbC,IAAI,EAAE,YAAY;EAElBC,KAAK,EAAE;IACLC,cAAc,EAAE;MACdC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDC,IAAI,EAAE;MACJH,IAAI,EAAEI,OAAO;MACbF,OAAO,EAAE;IACX;EACF,CAAC;EACDG,IAAI,EAAEA,CAAA,MAAO;IACXC,OAAO,EAAE,KAAK;IACdC,gBAAgB,EAAE,KAAK;IACvBC,QAAQ,EAAE;EACZ,CAAC,CAAC;EACFC,QAAQ,EAAE;IACRC,QAAQA,CAAA,EAAG;MACT,OAAOd,WAAW,CAAC;IACrB;EACF,CAAC;EAED,MAAMe,OAAMA,CAAA,EAAK;IACf,MAAM,IAAI,CAACC,YAAY,CAAC;EAC1B,CAAC;EAEDC,OAAO,EAAE;IACPC,KAAIA,CAAA,EAAK;MACP,IAAI,CAACP,gBAAe,GAAI,KAAI;IAC9B,CAAC;IAED,MAAMK,YAAWA,CAAA,EAAK;MACpB,IAAI,CAACN,OAAM,GAAI,IAAG;MAClB,IAAI;QACF,IAAI,CAACE,QAAO,GAAI,MAAMb,GAAG,CAACiB,YAAY,CAAC;QACvC,IAAI,CAACN,OAAM,GAAI,KAAI;MACrB,EAAE,OAAOS,CAAC,EAAE;QACV,MAAMC,QAAO,GAAID,CAAC,EAAEE,QAAQ,EAAEZ,IAAI,EAAEa,OAAM,IAAK,6CAA4C;QAC3F,IAAI,CAACR,QAAQ,CAACS,SAAS,CAAC;UAACC,IAAI,EAAE,IAAI;UAAEC,GAAG,EAAEL,QAAQ;UAAEM,KAAK,EAAE;QAAS,CAAE;QACtE,IAAI,CAAChB,OAAM,GAAI,KAAI;MACrB;IACF,CAAC;IAED,MAAMiB,UAASA,CAAGC,SAAS,EAAE;MAC3B,IAAI,CAAClB,OAAM,GAAI,IAAG;MAClB,MAAMD,IAAG,GAAI;QACXoB,gBAAgB,EAAE,IAAI,CAAC1B,cAAc;QACrC2B,UAAU,EAAEF;MACd;MACA,IAAI;QACF,MAAM7B,GAAG,CAACgC,UAAU,CAACtB,IAAI;QACzB,IAAI,CAACK,QAAQ,CAACS,SAAS,CAAC;UAACC,IAAI,EAAE,IAAI;UAAEC,GAAG,EAAE,4BAA4B;UAAEC,KAAK,EAAE;QAAS,CAAE;QAC1F,IAAI,CAACM,KAAK,CAAC,QAAQ;QACnB,IAAI,CAACtB,OAAM,GAAI,KAAI;MACrB,EAAE,OAAOS,CAAC,EAAE;QACV,MAAMC,QAAO,GAAID,CAAC,EAAEE,QAAQ,EAAEZ,IAAI,EAAEa,OAAM,IAAK,6CAA4C;QAC3F,IAAI,CAACR,QAAQ,CAACS,SAAS,CAAC;UAACC,IAAI,EAAE,IAAI;UAAEC,GAAG,EAAEL,QAAQ;UAAEM,KAAK,EAAE;QAAS,CAAE;QACtE,IAAI,CAAChB,OAAM,GAAI,KAAI;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}